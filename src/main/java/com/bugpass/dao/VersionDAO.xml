<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
  <!-- 
  添加版本
  public boolean add(Version obj) throws Exception {
		return DBUtil.execUpdate("insert into version values(null,?,?)", obj.getProjectId(), obj.getVersionName()) > 0;
	}
根据版本ID删除
public boolean deleteByVersionId(int versionId) throws Exception {
		// TODO Auto-generated method stub
		return DBUtil.execUpdate("delete from version where versionId=?", versionId) > 0;
	}
根据版本ID修改
public boolean update(Version version) throws Exception {
		return DBUtil.execUpdate("update version set versionName=? where versionId=?", version.getVersionName(),version.getVersionId())>0;
	}
根据项目ID查找所有版本
public List<Version> findAllByProjectid(int projectId) throws Exception {
		// TODO Auto-generated method stub
		return (List<Version>) DBUtil.execQuery("select * from version where projectId=?", Version.class, projectId);
	}
根据版本ID查找版本
public Version findById(long id) throws Exception {
		
		List<Version> list= (List<Version>) DBUtil.execQuery("select * from version where versionId=?", Version.class, id);
		if (list.size()>0) {
			return list.get(0);
		}else {
			return null;
		}
	}
根据版本名模糊查询
public List<Version> findByLikename(String vaersionName) {
		// TODO Auto-generated method stub
		return (List<Version>) DBUtil.execQuery("select * from version where versionName like ?", Version.class,
				"%"+vaersionName+"%");
	}
根据版本名查询
public List<Version> findByVersionname(String vaersionName) {
		// TODO Auto-generated method stub
		return (List<Version>) DBUtil.execQuery("select * from version where versionName=?", Version.class,
				vaersionName);
	}
   -->
<mapper namespace="com.bugpass.dao.VersionDAO">

	<!-- 根据项目ID查询  -->
	<select id="findAllByProjectid" resultType="com.bugpass.entity.Version">
		select * from version where projectId=#{projectId}
	</select>
	
	<!-- 根据版本ID查询 -->
	<select id="queryById" resultType="com.bugpass.entity.Version">
	select * from version where versionId=#{versionId}
	</select>
	
	<!-- 根据版本名查询 -->
	<select id="findByVersionname" resultType="com.bugpass.entity.Version">
	select * from version where versionName=#{versionName}
	</select>
	
	<!-- 根据版本名模糊查询 -->
	<select id="findByLikename" resultType="com.bugpass.entity.Version">
	select * from version where versionName like concat('%',#{versionName},'%')
	</select>
	
	<!-- 根据版本ID修改 -->
	<update id="update">
	update version set versionName=#{versionName} where versionId=#{versionId}
	</update>
	
	<!-- 根据版本ID删除 -->
	<delete id="deleteByVersionId">
	delete from version where versionId=#{versionId}
	</delete>
	
	<!-- 添加版本 -->
	<insert id="add" useGeneratedKeys="true" keyProperty="versionId">
	insert into version values(#{prolectId},#{versionName})
	</insert>
	
</mapper>